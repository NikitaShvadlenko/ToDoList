name: "ToDoList"

settings:
  base:
    DEBUG_INFORMATION_FORMAT: dwarf-with-dsym
    ENABLE_BITCODE: NO
    CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED: YES
    CLANG_ANALYZER_LOCALIZABILITY_EMPTY_CONTEXT: YES
    CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER: YES

options:
  deploymentTarget:
    iOS: 15.0
  preGenCommand: ./Scripts/autogenerated_files.sh

packages: 
  SnapKit:
    url: https://github.com/SnapKit/SnapKit
    from: 5.0.1

  SharedResources:
    path: ToDoList/Packages/SharedResources
    group: UI

  UseCase:
    path: ToDoList/Packages/UseCase
    group: Core

targets:
  ToDoList:
    platform: iOS
    type: application
    sources:
          - path: "ToDoList"
            excludes:
            - "Packages/**/"
    dependencies:
        - package: SnapKit
        - package: SharedResources
        - package: UseCase
    settings:
      base:
        TARGETED_DEVICE_FAMILY: 1
        DISPLAY_NAME: "ToDoList"
        INFOPLIST_FILE: "ToDoList/Info.plist"
        OTHER_LDFLAGS: $(inherited) -ObjC
        DEVELOPMENT_TEAM: NikitaDevelopmentTeam
        PRODUCT_BUNDLE_IDENTIFIER: com.shvadShvad.stolovka
        CODE_SIGN_STYLE: Manual
      configs:
        Debug:
          CODE_SIGN_IDENTITY: "Apple Development"
          PROVISIONING_PROFILE_SPECIFIER: "ToDoList Development"
        Release:
          CODE_SIGN_IDENTITY: "Apple Distribution"
          PROVISIONING_PROFILE_SPECIFIER: "ToDoList AppStore"

        
    preBuildScripts:
    - name: "Swiftlint"
      script: |
              export PATH="$PATH:/opt/homebrew/bin"
              if which swiftlint >/dev/null; then
                swiftlint
              else
                echo "warning: SwiftLint not installed, run brew install swiftlint"
              fi
